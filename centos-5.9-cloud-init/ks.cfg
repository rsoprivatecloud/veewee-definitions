install
cdrom
lang en_US.UTF-8
keyboard us
network --bootproto=dhcp
rootpw --iscrypted $1$damlkd,f$UC/u5pUts5QiU3ow.CSso/
firewall --enabled --trust eth0 --ssh
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone UTC
bootloader --location=mbr

text
skipx
zerombr

%pre
dd if=/dev/zero of=/dev/vda bs=512 count=1
parted -s /dev/vda mklabel msdos
TOTAL=`parted -s /dev/sda unit mb print free | grep Free | awk '{print $3}' | cut -d "M" -f1`
parted -s /dev/vda mkpart primary swap 0 488
parted -s /dev/vda mkpart primary ext3 $TOTAL

clearpart --all --initlabel --drives=vda
part swap --onpart=/dev/vda1
part /    --onpart=/dev/vda2

auth  --useshadow  --enablemd5
firstboot --disabled
reboot

%packages --ignoremissing
@core
bzip2
kernel-devel
kernel-headers
-ipw2100-firmware
-ipw2200-firmware
-ivtv-firmware

%post
/usr/bin/yum -y intsall sudo vim-minimal vim-enhanced acpid wget
/usr/sbin/groupadd stack 
/usr/sbin/useradd stack -g stack -G wheel
echo "stack"|passwd --stdin stack
echo "stack        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers